var currentTab=0;const progressBar=document.getElementsByClassName("progress-bar"),progress=e=>{progressBar[0].style.width=`${e}%`},prevBtn=document.getElementById("prevBtn"),nextBtn=document.getElementById("nextBtn"),statusWarning=document.getElementById("statusWarning"),switchUseBirthday=document.querySelector("#form-check-usebirthday"),switchUseBirthdayPicker=document.querySelector("#form-check-usebirthdaypicker"),inputBirthdayDiv=document.querySelector("#form-input-birthday-div"),inputBirthday=document.querySelector("#form-input-birthday"),inputBirthdayPickerDiv=document.querySelector("#form-input-birthdaypicker-div"),inputBirthdayPicker=document.querySelector("#form-input-birthdaypicker"),inputAge=document.querySelector("#form-input-age"),inputAgeUnit=document.querySelector("#form-select-ageunit"),changeSelectedAgeUnit=e=>{inputAgeUnit.value=`${e}`},inputAgeText=document.querySelector("#form-input-age-text"),switchUseMonthDiv=document.querySelector("#form-switch-use-month-div"),switchUseMonth=document.querySelector("#form-switch-use-month"),selectIso=document.querySelector("#form-select-iso"),inputIsoIssueDiv=document.querySelector("#form-input-iso-issue-div"),switchKg=document.querySelector("#form-switch-kg"),kgDiv=document.querySelector("#form-input-kg-div"),inputKg=document.querySelector("#form-input-kg"),resetButton=document.getElementById("resetButton"),resetToast=document.getElementById("resetToast");async function webShare(){var e="";const t=document.querySelector("#form-input-rm"),n=document.querySelector("#form-select-zlb"),i=document.querySelector("#form-input-dia"),a=document.querySelector("#form-select-sex"),r=document.querySelector("#form-switch-use-month"),s=document.querySelector("#form-input-age"),c=document.querySelector("#form-select-iso"),d=document.querySelector("#form-input-iso-issue"),o=document.querySelector("#form-input-kg"),u=document.querySelector("#form-select-mon"),l=document.querySelector("#form-select-beat"),h=document.querySelector("#form-input-ank"),y=document.querySelector("#form-input-son");1==r.checked&&(r.value=" Monate"),""!=d.value&&(d.value=" - "+d.value),e=""==o.value?"unter 150kg":o.value+"kg";const v="RM: ðŸš‘ "+t.value+"\nZLB: "+n.value+"\nDia: "+i.value+"\nSex: "+a.value+"\nAge: "+s.value+r.value+"\nIso: "+c.value+d.value+"\nKg: "+e+"\nMon: "+u.value+"\nBeat: "+l.value+"\nAnk: "+h.value+" Uhr\n"+y.value;try{await navigator.share({files:undefined,title:"SMS Anmeldung",text:v,url:undefined}),console.log("Successfully sent share")}catch(e){console.log("Error sharing: "+e)}}function checkNavigatiorShare(){return void 0!==navigator.share}function showTab(e){var t=document.getElementsByClassName("tab");t[e].classList.remove("d-none"),0==e?prevBtn.classList.add("d-none"):prevBtn.classList.remove("d-none"),checkNavigatiorShare()||(statusWarning.classList.remove("d-none"),statusWarning.innerHTML="Die Funktion steht auf diesem GerÃ¤t nicht zur VerfÃ¼gung!"),e==t.length-1?(nextBtn.classList.add("d-none"),checkNavigatiorShare()?(document.getElementById("fnShareButton").classList.remove("d-none"),statusWarning.classList.add("d-none")):document.getElementById("fnShareButton").classList.add("d-none")):(nextBtn.classList.remove("d-none"),document.getElementById("fnShareButton").classList.add("d-none"))}function nextPrev(e){var t,n=document.getElementsByClassName("tab");if(1==e&&!validateForm())return!1;n[currentTab].classList.add("d-none"),999==e?currentTab=0:currentTab+=e,currentTab>=n.length&&webShare(),t=100/(n.length-1)*currentTab,progressBar[0].style.width=`${t}%`,showTab(currentTab)}function validateForm(){var e,t,n=!0;for(e=document.getElementsByClassName("tab")[currentTab].querySelectorAll("textarea, input, select"),t=0;t<e.length;t++)(n=e[t].checkValidity())?e[t].classList.remove("is-invalid"):(n=!1,e[t].classList.add("is-invalid"));return n}function persistFunc(e){localStorage.setItem(e.id,e.value)}function ageCalculator(e){var t,n=e,i=new Date,a=n.getYear(),r=n.getMonth(),s=n.getDate(),c=i.getYear(),d=i.getMonth(),o=i.getDate();if(yearAge=c-a,d>=r)var u=d-r;else{yearAge--;u=12+d-r}if(o>=s)var l=o-s;else{l=31+o-s;--u<0&&(u=11,yearAge--)}0==(t={years:yearAge,months:u,days:l}).years&&0==t.months&&0==t.days?(inputAge.value="1",changeSelectedAgeUnit("day")):0==t.years&&0==t.months&&t.days>0?(inputAge.value=t.days,changeSelectedAgeUnit("day")):0==t.years&&t.months>0&&0==t.days||0==t.years&&t.months>0&&t.days>0?(inputAge.value=t.months,changeSelectedAgeUnit("month")):1==t.years&&0==t.months&&0==t.days?(inputAge.value=t.years,changeSelectedAgeUnit("year")):1==t.years&&0==t.months&&t.days>0||1==t.years&&t.months>0&&0==t.days||1==t.years&&t.months>0&&t.days>0?(inputAge.value=t.months+12,changeSelectedAgeUnit("month")):(t.years>1&&0==t.months&&0==t.days||t.years>1&&0==t.months&&t.days>0||t.years>1&&t.months>0&&0==t.days||t.years>1&&t.months>0&&t.days>0)&&(inputAge.value=t.years,changeSelectedAgeUnit("year"))}function invokeServiceWorkerUpdateFlow(e){const t=document.getElementById("updateAvailableToast");new bootstrap.Toast(t).show();document.getElementById("reloadButton").addEventListener("click",(()=>{e.waiting&&e.waiting.postMessage("SKIP_WAITING")}))}
//!SECTION
document.addEventListener("DOMContentLoaded",(function(e){showTab(currentTab)})),selectIso.addEventListener("change",(function(){"Nein"==selectIso.value||""==selectIso.value?inputIsoIssueDiv.classList.add("d-none"):inputIsoIssueDiv.classList.remove("d-none")})),document.querySelectorAll("input").forEach((e=>{e.value=localStorage.getItem(e.id),e.addEventListener("change",persistFunc)})),switchUseBirthday.addEventListener("change",(function(){1==switchUseBirthday.checked&&1==switchUseBirthdayPicker.checked?(inputBirthdayDiv.classList.add("d-none"),inputBirthdayPickerDiv.classList.remove("d-none"),inputAgeUnit.disabled=!0):1==switchUseBirthday.checked&&1!=switchUseBirthdayPicker.checked?(inputBirthdayDiv.classList.remove("d-none"),inputBirthdayPickerDiv.classList.add("d-none"),inputAgeUnit.disabled=!0):(1!=switchUseBirthday.checked&&1==switchUseBirthdayPicker.checked||1!=switchUseBirthday.checked&&1!=switchUseBirthdayPicker.checked)&&(inputBirthdayDiv.classList.add("d-none"),inputBirthdayPickerDiv.classList.add("d-none"),switchUseBirthdayPicker.checked=!1,inputAgeUnit.disabled=!1)})),switchUseBirthdayPicker.addEventListener("change",(function(){1==switchUseBirthday.checked&&1==switchUseBirthdayPicker.checked?(inputBirthdayDiv.classList.add("d-none"),inputBirthdayPickerDiv.classList.remove("d-none"),inputAgeUnit.disabled=!0):1==switchUseBirthday.checked&&1!=switchUseBirthdayPicker.checked?(inputBirthdayDiv.classList.remove("d-none"),inputBirthdayPickerDiv.classList.add("d-none"),inputAgeUnit.disabled=!0):1!=switchUseBirthday.checked&&1==switchUseBirthdayPicker.checked?(inputBirthdayDiv.classList.add("d-none"),inputBirthdayPickerDiv.classList.remove("d-none"),switchUseBirthday.checked=!0,inputAgeUnit.disabled=!0):1!=switchUseBirthday.checked&&1!=switchUseBirthdayPicker.checked&&(inputBirthdayDiv.classList.add("d-none"),inputBirthdayPickerDiv.classList.add("d-none"),switchUseBirthdayPicker.checked=!1,switchUseBirthday.checked=!1,inputAgeUnit.disabled=!1)})),inputBirthday.addEventListener("change",(function(){if(valid=inputBirthday.checkValidity(),valid){inputBirthday.classList.remove("is-invalid");var e=inputBirthday.value;ageCalculator(new Date(e.replace(/(\d{2})\.(\d{2})\.(\d{4})/,"$3-$2-$1")))}else valid=!1,inputBirthday.classList.add("is-invalid")})),inputBirthdayPicker.addEventListener("change",(function(){if(valid=inputBirthdayPicker.checkValidity(),valid){inputBirthdayPicker.classList.remove("is-invalid");var e=inputBirthdayPicker.value;ageCalculator(new Date(e.replace(/(\d{4})\.(\d{2})\.(\d{2})/,"$1-$2-$1")))}else valid=!1,inputBirthdayPicker.classList.add("is-invalid")})),
//!SECTION
switchKg.addEventListener("change",(function(){1==switchKg.checked?(kgDiv.classList.remove("d-none"),inputKg.required=!0):(kgDiv.classList.add("d-none"),inputKg.required=!1,inputKg.value=null)})),
//!SECTION
resetButton&&resetButton.addEventListener("click",(()=>{new bootstrap.Toast(resetToast).show()})),"serviceWorker"in navigator&&window.addEventListener("load",(async()=>{const e=await navigator.serviceWorker.register("service-worker.js");e.waiting&&invokeServiceWorkerUpdateFlow(e),e.addEventListener("updatefound",(()=>{e.installing&&(console.log("Test 1"),e.installing.addEventListener("statechange",(()=>{console.log("Test 2"),e.waiting&&(console.log("Test 3"),navigator.serviceWorker.controller?(console.log("Test 4"),invokeServiceWorkerUpdateFlow(e)):(console.log("Test 5"),console.log("Service Worker initialized for the first time")))})))}));let t=!1;navigator.serviceWorker.addEventListener("controllerchange",(()=>{t||(window.location.reload(),t=!0)}))}));
//!SECTION