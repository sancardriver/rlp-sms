<!DOCTYPE html>
<html lang="de">
<!-- SECTION - Header -->

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Progressive Web App zum generieren der SMS zur Anmeldung
            von Patienten in einer Klinik im Bereich Scherer." />
    <meta name="author" content="J. Starck" />
    <meta name="color-scheme" content="light dark">
    <title>RLP SMS Anmeldung</title>
    <link rel="apple-touch-icon" href="/icon.png">
    <script>
        if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
            document.documentElement.style.display = "none";
            document.head.insertAdjacentHTML(
                "beforeend",
                "<link id=\"css\" rel=\"stylesheet\" href=\"css/style.css\" onload=\"document.documentElement.style.display = ''\">"
            );
        }
    </script>
    <!-- SECTION - Stylesheets -->
    <link href="css/style-dark.css" rel="stylesheet" media="(prefers-color-scheme: dark)">
    <link href="css/style.css" rel="stylesheet" media="(prefers-color-scheme: light)">
    <!-- !SECTION -->
    <link rel="manifest" href="manifest.json" />
</head>
<!-- !SECTION -->
<!-- SECTION - Inhaltsbereich -->

<body>
    <form class="needs-validation" id="rlp-sms-form" novalidate>
        <div class="container">
            <div class="row">
                <!-- SECTION - Title -->
                <header class="col-6 offset-3 p-1 mt-2 col-sm-6 offset-sm-3 col-md-8 offset-md-2 p-md-2 text-center">
                    <img src="img/logo/logo_rlp-sms.svg" class="img-fluid logo-rlp-sms" alt="Logo von RLP SMS">
                </header>
                <!-- !SECTION -->
                <!-- SECTION - Content -->
                <main class="col-12 mx-0 px-3">
                    <div class="progress my-4">
                        <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="50"
                            class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"
                            style="width: 0%"></div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-input-rm" class="form-label">Wie ist der Funkrufname?*</label>
                            <input type="text" class="form-control" id="form-input-rm"
                                placeholder="zum Beispiel: RK MZ 99/83-01" required onchange="persistFunc(this)">
                            <div class="invalid-feedback">Bitte gib deinen Funkrufnamen an!</div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-select-zlb" class="form-label">Wie ist der <abbr title="Zentraler Landesweiter
                                Behandlungskapazitätennachweis">ZLB</abbr>-Status?*</label>
                            <select id="form-select-zlb" class="form-select" aria-label="ZLB Status" required>
                                <option value="" selected>Zuweisungart wählen</option>
                                <option value="AV Grün">AV Grün &#128994;</option>
                                <option value="Zwangszuweisung">Zwangszuweisung &#128308;</option>
                            </select>
                            <div class="invalid-feedback">Bitte Auswahl treffen!</div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-input-dia" class="form-label">Wie ist die Verdachtsdiagnose?*</label>
                            <input type="text" class="form-control" id="form-input-dia"
                                placeholder="Husten, Schnupfen und Heiserkeit" required>
                            <div class="invalid-feedback">Bitte gib eine Verdachtsdiagnose an!</div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-select-sex" class="form-label">Von welchem Geschlecht ist die Person?*</label>
                            <select id="form-select-sex" class="form-select" aria-label="Geschlecht wählen" required>
                                <option value="" selected>Geschlecht wählen</option>
                                <option value="d">Divers</option>
                                <option value="w">Weiblich</option>
                                <option value="m">Männlich</option>
                            </select>
                            <div class="invalid-feedback">Bitte Auswahl treffen!</div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <div class="form-check form-switch d-none">
                                <input class="form-check-input" type="checkbox" role="switch" id="form-switch-birthday">
                                <label class="form-check-label" for="form-switch-birthday">Geburtsdatum verwenden</label>
                            </div>
                        </div>
                        <div class="mb-3 d-none" id="form-input-birthday-div">
                            <label for="form-input-birthday" class="form-label">Wie ist das Geburtsdatum der Person?</label>
                            <input type="date" class="form-control" id="form-input-birthday" placeholder="05.12.1989">
                            <div class="invalid-feedback">Das Geburtsdatum ist nicht gesetzt!</div>
                        </div>
                        <div class="mb-3" id="form-switch-use-month-div">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="form-switch-use-month">
                                <label class="form-check-label" for="form-switch-use-month">Alter in Monaten angeben</label>
                            </div>
                        </div>
                        <div class="mb-3" id="form-input-age-div">
                            <label for="form-input-age" class="form-label">Wie alt ist die Person?*</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="form-input-age" placeholder="Alter"
                                    max="120" inputmode="decimal" required>
                                <span class="input-group-text" id="form-input-age-text">Jahre</span>
                                <div class="invalid-feedback">Alter ist nicht plausibel oder fehlt!</div>
                            </div>
                        </div>
                        
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-select-iso" class="form-label">Ist die Person isolationspflichtig?*</label>
                            <select class="form-select" id="form-select-iso" aria-label="Isolationspflichtig"
                                placeholder="Isolationspflicht*" required>
                                <option value="" selected>Auswahl treffen</option>
                                <option value="Nein">Nein</option>
                                <option value="Ja">Ja</option>
                                <option value="Unklar">Unklar</option>
                            </select>
                            <div class="invalid-feedback">
                                Besteht eine Isolationspflicht?
                            </div>
                        </div>
                        <div class="mb-3 d-none" id="form-input-iso-issue-div">
                            <label for="form-input-iso-issue" class="form-label">Welchen Grund gibt es für eine Isolation?</label>
                            <input type="text" class="form-control" id="form-input-iso-issue"
                                placeholder="Infektion oder Grund für mögliche Isolation">
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" role="switch" id="form-switch-kg">
                                <label class="form-check-label" for="form-switch-kg">Gewicht über 150kgKG</label>
                            </div>
                        </div>
                        <div class="mb-3 d-none" id="form-input-kg-div">
                            <label for="form-input-kg" class="form-label">Wie schwer ist die Person*</label>
                            <div class="input-group">
                                <input type="number" class="form-control" id="form-input-kg" inputmode="decimal"
                                    placeholder="150" min="150" max="500">
                                <span class="input-group-text">kgKG</span>
                                <div class="invalid-feedback">Gewicht unter 150kgKG oder nicht plausibel!</div>
                            </div>
                        </div>

                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-select-mon">Ist die Person monitorpflichtig?*</label>
                            <select class="form-select" id="form-select-mon" aria-label="Monitorpflichtig"
                                placeholder="Monitorpflichtig?" required>
                                <option value="" selected>Auswahl treffen</option>
                                <option value="Nein">Nein</option>
                                <option value="Ja">Ja</option>
                                <option value="Unklar">Unklar</option>
                            </select>
                            <div class="invalid-feedback">
                                Besteht eine Monitorpflicht?
                            </div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-select-beat">Ist die Person beatmet?*</label>
                            <select class="form-select" id="form-select-beat" aria-label="Beatmet"
                                placeholder="Beatmet?" required>
                                <option value="" selected>Auswahl treffen</option>
                                <option value="Nein">Nein</option>
                                <option value="invasiv">invasiv</option>
                                <option value="nicht-invasiv">nicht-invasiv</option>
                            </select>
                            <div class="invalid-feedback">
                                Bitte Auswahl treffen!
                            </div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-input-ank" class="form-label">Erwartete Ankunftzeit*</label>
                            <div class="input-group">
                                <input type="time" class="form-control" id="form-input-ank"
                                    placeholder="Erwartete Ankunftzeit*" required>
                                <span class="input-group-text">Uhr</span>
                                <div class="invalid-feedback">
                                    Bitte ungefähre Ankunftszeit angeben!
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab d-none">
                        <div class="mb-3">
                            <label for="form-input-son" class="form-label">Gibt es noch sonstige Informationen?</label>
                            <input type="text" class="form-control" id="form-input-son"
                                placeholder="Platz für weitere Informationen">
                        </div>
                    </div>

                    <div class="container" id="nextprevious">
                        <div class="row">
                            <div class="col-6 text-start">
                                <button type="button" id="prevBtn" class="btn btn-secondary" onclick="nextPrev(-1)">
                                    zurück</button>
                            </div>
                            <div class="col-6 text-end">
                                <button type="button" id="nextBtn" class="btn btn-primary"
                                    onclick="nextPrev(1)">weiter</button>
                            </div>
                        </div>
                    </div>

                    
                </main>
                <!-- !SECTION -->
                <footer class="fixed-bottom text-center">
                    <div class="px-5 d-grid gap-1">
                        <div class="alert alert-warning d-none" role="alert" id="statusWarning"></div>
                    </div>                  
                    <div class="px-5 d-grid gap-2">
                        <button class="btn btn-primary" type="submit" id="fnShareButton" onclick="nextPrev(1)">SMS generieren</button>
                        <button class="btn btn-secondary" id="resetButton" type="button">Zurücksetzen</button>
                    </div>
                    <p><small class="text-muted">&#9749; RLP-SMS coded by J. Starck</small></p>
                </footer>

            </div>
        </div>
        <div class="toast-container position-fixed top-50 start-50 translate-middle p-3">
            <div id="resetToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
                data-bs-autohide="false">
                <div class="toast-body text-center">
                    <p>Formular leeren?</p>
                    <hr>
                    <div class="mt-2 pt-2 d-grid gap-2 col-6 mx-auto">
                        <button type="button" class="btn btn-primary btn-sm" onclick="this.form.reset();nextPrev(999)"
                            data-bs-dismiss="toast">Leeren</button>
                        <button type="button" class="btn btn-secondary btn-sm"
                            data-bs-dismiss="toast">Abbrechen</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="toast-container position-fixed top-50 start-50 translate-middle p-3">
            <div id="updateAvailableToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true"
                data-bs-autohide="false">
                <div class="toast-body text-center">
                    <p class="lead">Neue Version steht zur Verfügung!</p>
                    <hr>
                    <div class="mt-2 pt-2 d-grid gap-1 col-6 mx-auto">
                        <button type="button" id="reloadButton" class="btn btn-primary btn-sm">Aktualisieren</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <!-- SECTION - Javascripts -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <!-- !SECTION -->
</body>
<!-- !SECTION -->

</html>